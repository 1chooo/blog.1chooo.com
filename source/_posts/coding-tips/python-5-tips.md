---
title: äº”å€‹ Python å¥½ç¿’æ…£
categories: CodingTips
date: 2024-03-16 00:00:00
tags: 
- Python
- Clean Code
cover: /images/cover/coding-style/python-5-tips.png
---


åœ¨å­¸ç¿’åŸºç¤ç¨‹å¼èªè¨€ä¸­ï¼Œæˆ‘å€‘å¾€å¾€åªåœ¨ä¹ç¨‹å¼èƒ½ä¸èƒ½é‹è¡Œï¼Œæœƒä¸æœƒåŸºç¤èªæ³•ï¼Œç„¶è€Œå¾ˆå¤šäººæ²’æœ‰ç´¯ç©åˆ°å°ˆæ¡ˆä¸­å¯¦éš›æ’°å¯«çš„å¥½ç¿’æ…£ï¼Œå› æ­¤é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°‡æœƒè¨è«–äº”å€‹ Python çš„å¥½ç¿’æ…£ï¼Œä¸¦ä¸”é€™äº›äº‹æˆ‘å·²ç¶“è½å¯¦åœ¨å°ˆæ¡ˆä¸­çš„ Coding Style å¸Œæœ›é€éé€™æ¬¡çš„åˆ†äº«èƒ½å¤ å¹«åŠ©çœ‹åˆ°é€™é‚Šçš„ä½ å¯«å‡ºæ›´å¥½çš„ç¨‹å¼ç¢¼ã€‚

### 1. `if __name__ == '__main__':`

å¾ˆå¤šäººå¯èƒ½åœ¨ review åˆ¥äººçš„ Python å°ˆæ¡ˆæ™‚ï¼Œéƒ½æœƒç™¼ç¾é€™å€‹æ¢ä»¶å¼ã€‚é€™å€‹æ¢ä»¶å¼çš„ç›®çš„æ˜¯ç‚ºäº†ç¢ºä¿é€™å€‹æª”æ¡ˆæ˜¯è¢«ç›´æ¥åŸ·è¡Œï¼Œè€Œä¸æ˜¯è¢« import é€²å…¶ä»–æª”æ¡ˆä¸­ï¼Œæˆ‘å€‘å¯ä»¥èˆ‰å€‹ä¾‹å­ä¾†çœ‹çœ‹åŠ ä¸Šé€™å€‹æ¢ä»¶å¼çš„é‡è¦æ€§ã€‚

æˆ‘å€‘ä»Šå¤©è¦è¨­è¨ˆä¸€å€‹ `api` æ˜¯ `get_name()`ï¼Œé€éå‘¼å«é€™å€‹ api æˆ‘å€‘å¯ä»¥å¾—åˆ°å¾è³‡æ–™åº«ä¸­å–å¾—åå­—ï¼Œæˆ‘å€‘å…ˆä¾†çœ‹çœ‹ä»¥ä¸‹çš„ç¨‹å¼ç¢¼ï¼š

```python
# api.py
import time

def get_name() -> None:
    print('Getting name...')
    time.sleep(3)
    print('Hugo')

get_name()
```

```python
# main.py
from api import get_name

get_name()
```

æˆ‘å€‘å¯ä»¥å…ˆè§€å¯ŸåŸ·è¡Œçµæœå¦‚ä»¥ä¸‹ï¼š

```bash
Getting name...
Hugo
Getting name...
Hugo
```

ç¸½å…±åŸ·è¡Œäº†å…©æ¬¡ `get_name()`ï¼Œä½†æ˜¯å¥‡æ€ªçš„æ˜¯æˆ‘å€‘æ˜æ˜åªæœ‰åœ¨ `main.py` ä¸­å‘¼å«äº†ä¸€æ¬¡ `get_name()`ï¼Œç‚ºä»€éº¼æœƒåŸ·è¡Œå…©æ¬¡å‘¢ï¼Ÿ

å› ç‚ºæˆ‘å€‘åœ¨ `api.py` ä¸­çš„ `get_name()` æ˜¯ç›´æ¥è¢«åŸ·è¡Œçš„ï¼Œæ‰€ä»¥ç•¶æˆ‘å€‘åœ¨ `main.py` ä¸­ import `api.py` æ™‚ï¼Œ`get_name()` ä¹Ÿæœƒè¢«åŸ·è¡Œä¸€æ¬¡ã€‚

å› æ­¤æˆ‘å€‘åªè¦æŠŠ `main.py` æ”¹æˆä»¥ä¸‹çš„ç¨‹å¼ç¢¼å°±å¯ä»¥è§£æ±ºé€™å€‹å•é¡Œï¼š

```python
# main.py
from api import get_name

if __name__ == '__main__':
    get_name()
```

æˆ‘å€‘å°±æœƒå¾—åˆ°æˆ‘å€‘æƒ³è¦çš„åŸ·è¡Œçµæœå¦‚ä»¥ä¸‹ï¼š

```bash
Getting name...
Hugo
```

é€™æ¨£å°±ä¸æœƒåŸ·è¡Œå…©æ¬¡ `get_name()` äº†ï¼Œä¹Ÿå°±æ˜¯èªªåœ¨æˆ‘å€‘çš„ç¨‹å¼ç¢¼ä¸­åŠ ä¸Š `if __name__ == '__main__':` å¯ä»¥è®“ Python çŸ¥é“ã€Œåªè¦ã€åŸ·è¡Œè©²æª”æ¡ˆå‘¼å«çš„ç¨‹å¼ç¢¼ï¼Œè€Œä¸æ˜¯å¾å…¶ä»– import é€²ä¾†çš„ functionã€‚

### 2. åœ¨ Python ä¸­åŠ å…¥ `main()` function

åœ¨å¾ˆå¤šç¨‹å¼èªè¨€ä¸­éƒ½æœ‰ `main()` function çš„å­˜åœ¨ï¼Œåƒæ˜¯ Go, C, C++, Java ç­‰ç­‰ã€‚å› ç‚ºå°æ–¼ Python ä»»ä½•çš†æ˜¯ç‰©ä»¶çš„ç‰¹æ€§ï¼Œæ²’æœ‰ `main()` function ä¹Ÿæ˜¯å¯ä»¥åŸ·è¡Œçš„ï¼Œä¸éåŠ ä¸Š `main()` function æˆ‘å€‘å¯ä»¥çŸ¥é“ç¨‹å¼ä¸»è¦çš„é€²å…¥é»æ˜¯ä»€éº¼ã€‚

æˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹ç¯„ä¾‹ç¨‹å¼ç¢¼è§€å¯Ÿï¼Œé€™æ˜¯æ²’æœ‰åŠ ä¸Š `main()` function çš„ç¨‹å¼ç¢¼ï¼š

```python
# Bad Habit
def say_hello() -> None:
    print('Hello')

def say_goodbye() -> None:
    print('Goodbye')

say_hello()
say_goodbye()
```

å¦å¤–æˆ‘å€‘å¯ä»¥çœ‹åˆ°æ­é…ç¬¬ä¸€å€‹å¥½ç¿’æ…£çš„ `if __name__ == '__main__':`ï¼Œå†åŠ ä¸Šå®£å‘Š `main()` functionï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥ç¢ºä¿ç¨‹å¼çš„é€²å…¥é»æ˜¯ `main()` functionï¼Œå¦å¤–æˆ‘å€‘ä¹Ÿå¯ä»¥ç¢ºèªçš„æ˜¯åŸ·è¡Œçš„æ˜¯è©²æª”æ¡ˆå‘¼å«çš„ `main()` functionã€‚

```python
# Good Habit
def say_hello() -> None:
    print('Hello')

def say_goodbye() -> None:
    print('Goodbye')

def main() -> None:
    say_hello()
    say_goodbye()

if __name__ == '__main__':
    main()
```

é€™æ™‚å€™å¤§å®¶å¯èƒ½æœƒè¦ºå¾—æˆ‘å¹³å¸¸çš„å¯«æ³•ä¹Ÿä¸æœƒå‡ºéŒ¯ï¼Œä½•å¿…å¤šå¯«å¹¾è¡Œå‘¢ï¼Ÿ

æˆ‘å€‘ä»Šå¤©è¦å‡ä½¿ç•¶ä½ çš„å°ˆæ¡ˆè¶Šä¾†è¶Šå¤§æ™‚ï¼Œè¦åœ¨å¹¾åƒè¡Œä¹‹ä¸­æ‰¾åˆ°ä¸»ç¨‹å¼é‹è¡Œçš„åœ°æ–¹æ˜¯ä¸€ä»¶éå¸¸å›°é›£çš„äº‹æƒ…ï¼Œå› æ­¤åŠ ä¸Š `main()` function å¯ä»¥è®“ä½ çš„ç¨‹å¼ç¢¼æ›´åŠ çš„æœ‰çµ„ç¹”æ€§ï¼Œä¸¦ä¸”ä¹Ÿå¯ä»¥æ›´å¿«åœ°é‡æ¸… scripts çš„é‹è¡Œç›®çš„ã€‚

### 3. é¿å…éå¤šçš„ `if` å·¢ç‹€åˆ¤æ–·é‚è¼¯

å‡å¦‚æˆ‘å€‘ä»Šå¤©ä¸Šèª²åªæƒ³é»è³‡å·¥ç³»çš„å¤§ä¸‰ï¼Œæˆ‘å€‘è¦å…ˆåˆ¤æ–·å¹´ç´šï¼Œå†åˆ¤æ–·ç³»æ‰€ï¼Œå¦‚æœéƒ½æœ‰ç¬¦åˆé‚£å°±æ˜¯é»åæˆåŠŸï¼Œå¦å‰‡å°±æ˜¯ç¿¹èª²å‡ºå»çˆ½äº†ï¼Œæˆ‘å€‘å¯ä»¥çœ‹çœ‹é€™å€‹ scenario çš„å¯¦ç¾ï¼š

```python
# Bad Habit
def check_attendance(grade: int, department: str) -> None:
    if grade == 3:
        if department == 'CS':
            print('Attendance success')
        else:
            print('You are not in CS department')
    else:
        print('You are not in 3rd grade')
```

é€™æ¨£çš„å¯«æ³•çœ‹èµ·ä¾†æ²’æœ‰ä»€éº¼å•é¡Œï¼Œä½†æ˜¯ç•¶æˆ‘å€‘çš„åˆ¤æ–·æ¢ä»¶è¶Šä¾†è¶Šå¤šæ™‚ï¼Œé€™æ¨£çš„å¯«æ³•æœƒè®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼è®Šå¾—éå¸¸é›£ä»¥é–±è®€ï¼Œæˆ‘å€‘å¯ä»¥é€éä»¥ä¸‹çš„å¯«æ³•ä¾†æ”¹å–„ï¼š

```python
# Good Habit
def is_year_three(grade: int) -> bool:
    return grade == 3

def is_cs_major(department: str) -> bool:
    return department == 'CS'

def check_attendance(grade: int, department: str) -> None:
    if is_year_three(grade) and is_cs_major(department):
        print('Attendance success')
    else:
        print('You are not in the class')
```

å¦‚æ­¤æˆ‘å€‘å¯ä»¥æŠŠæ¢ä»¶çµ¦åˆ†é–‹æˆä¸åŒçš„åˆ¤æ–·ï¼Œé€™æ¨£æˆ‘å€‘å¦‚æœè¦ä¿®æ”¹æ¢ä»¶çš„è©±ä¹Ÿå¯ä»¥ç›´æ¥å¾ç¨ç«‹å‡ºä¾†çš„ function é€²è¡Œä¿®æ”¹ï¼Œè€Œä¸ç”¨å»ä¿®æ”¹åŸæœ¬çš„ç¨‹å¼ç¢¼ï¼ŒåŒæ™‚ä¹Ÿé¿å…åŒä¸€å€‹ function ä¸­æœ‰éå¤šçš„ `if` å·¢ç‹€åˆ¤æ–·é‚è¼¯ï¼Œé€ æˆé–±è®€ä¸Šçš„å›°é›£ã€‚


### 4. ç‚ºè®Šæ•¸åŠ ä¸Šå‹åˆ¥æç¤º

Python æ˜¯å€‹ä¸ç”¨å®£å‘Šå‹åˆ¥çš„ç¨‹å¼èªè¨€ï¼Œé€™æ¨£çš„ç‰¹æ€§è®“ Python çš„ç¨‹å¼ç¢¼è®Šå¾—éå¸¸çš„éˆæ´»ï¼Œä½†æ˜¯ç•¶æˆ‘å€‘æ¥æ‰‹ä»–äººçš„å°ˆæ¡ˆåˆæˆ–æ˜¯éœ€è¦å¿«é€Ÿç†è§£ç¨‹å¼é‚è¼¯æ™‚ï¼Œæˆ‘å€‘å¾ˆé›£ä¸€çœ¼å°±çœ‹å‡ºé€™å€‹è®Šæ•¸æ˜¯ä»€éº¼å‹åˆ¥ï¼Œé€™æ™‚å€™æˆ‘å€‘å¯ä»¥é€éå‹åˆ¥æç¤ºä¾†è®“ç¨‹å¼ç¢¼æ›´åŠ çš„æ˜“è®€ã€‚

```python
number1: int = 10
number2: int = '20'

print(number1)  # 10
print(number2)  # 20
```

ä»¥ä¸Šçš„ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ° `number1` å’Œ `number2` éƒ½æœ‰åŠ ä¸Šå‹åˆ¥æç¤ºï¼Œéƒ½æ˜¯ `int`ï¼Œä¸éæˆ‘å€‘å¯ä»¥çœ‹åˆ° `number2` ä¸­ï¼Œæˆ‘å€‘è³¦äºˆçš„å…§å®¹æ˜¯ `'20'`ï¼Œé€™å€‹ä½œæ³•åœ¨ Python ä¸­æˆ‘å€‘å–®ç´”åªæ˜¯ print å‡ºä¾†çš„è©±æ˜¯ä¸æœƒæœ‰å•é¡Œçš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘å€‘è¦é€²è¡Œæ•¸å­¸é‹ç®—çš„è©±å°±æœƒå‡ºç¾å•é¡Œï¼Œé€™æ™‚å€™æˆ‘å€‘å°±å¯ä»¥é€éå‹åˆ¥æç¤ºä¾†ç­è§£è©²è®Šæ•¸è©²è³¦äºˆçš„é¡å‹ï¼Œä»¥å…åœ¨å¾ŒçºŒä½¿ç”¨å‡ºå•é¡Œã€‚

```python
number1: int = 10
number2: int = '20'

print(number1 + number2)
```

éŒ¯èª¤è¨Šæ¯æœƒå¦‚ä»¥ä¸‹ï¼Œæœƒç™¼ç¾ `number1` å’Œ `number2` çš„å‹åˆ¥ä¸åŒï¼Œæ‰€ä»¥ç„¡æ³•é€²è¡Œé‹ç®—ï¼Œä¹Ÿå°±æ˜¯èªªç•¶åˆæˆ‘å€‘åœ¨å®£å‘Šè®Šæ•¸æ™‚åŠ ä¸Šå‹åˆ¥æç¤ºï¼Œå¯ä»¥è®“æˆ‘å€‘é¿å…åšå‡ºå‹åˆ¥æ··ç”¨çš„éŒ¯èª¤ã€‚

```bash
Traceback (most recent call last):
  File "hugo/is/great/developer/python_tip_04.py", line 4, in <module>
    print(number1 + number2)
          ~~~~~~~~^~~~~~~~~
TypeError: unsupported operand type(s) for +: 'int' and 'str'
```

### 5. List Comprehension

æˆ‘å€‘åœ¨æ’°å¯«ç¨‹å¼æ™‚ï¼Œå¸¸å¸¸æœƒéœ€è¦éæ­·ä¸€å€‹ listï¼Œä¸¦ä¸”å°æ¯ä¸€å€‹å…ƒç´ é€²è¡Œæ“ä½œï¼Œé€™æ™‚å€™æˆ‘å€‘å¯èƒ½æœƒéœ€è¦æ’°å¯«ä¸€å † `for` è¿´åœˆé‚„æœ‰ `if` ä¾†å¾—åˆ°æˆ‘å€‘è¦çš„è³‡è¨Šï¼Œé€™æ™‚æˆ‘å€‘å°±å¯ä»¥é€é List Comprehension ä¾†è®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼æ›´åŠ çš„ç°¡æ½”ã€‚

ç•¶æˆ‘å€‘ä»Šå¤©è¦åœ¨ä¸€å€‹ List æ‰¾å‡ºæ‰€æœ‰çš„å¶æ•¸ï¼Œæˆ‘å€‘å¯ä»¥é€éä»¥ä¸‹çš„å¯«æ³•ä¾†é”æˆï¼š

```python
# Bad Habit
numbers = [1, 2, 3, 4, 5]
even_numbers = []

for number in numbers:
    if number % 2 == 0:
        even_numbers.append(number)

print(even_numbers) # [2, 4]
```

é€é List Comprehension æˆ‘å€‘å¯ä»¥æŠŠä¸Šé¢çš„ç¨‹å¼ç¢¼ç°¡åŒ–æˆä»¥ä¸‹çš„å¯«æ³•ï¼š

{% note green %}
**ğŸ’¡ TIP**

é€™é‚Šæä¾›å¤§å®¶ List Comprehension çš„è¨˜æ†¶æ–¹æ³•ï¼Œé‚£å°±æ˜¯ `[ç›®æ¨™ for ç›®æ¨™ in ä¾†æº if æ¢ä»¶]`ï¼Œé€™æ¨£å¯ä»¥å¹«åŠ©å¤§å®¶æ›´å¿«ç†è§£ä»¥åŠä¸Šæ‰‹ã€‚
{% endnote %}

```python
# Good Habit
numbers = [1, 2, 3, 4, 5]

even_numbers = [number for number in numbers if number % 2 == 0]

print(even_numbers) # [2, 4]
```

å®Œæˆå•¦ ğŸ–ğŸ»ï¼ä»¥ä¸Šå°±æ˜¯äº”å€‹åœ¨ Python ä¸­çš„å¥½ç¿’æ…£ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨æ’°å¯«å°ˆæ¡ˆä¸­ä¸€æ­¥ä¸€æ­¥ç´¯ç©åˆ°çš„ç¶“é©—ï¼Œæœ‰äº›ä¹Ÿä¸æ˜¯è€å¸«ä¸Šèª²æœƒæ•™çš„å…§å®¹ï¼Œä½†æ˜¯å¥½ç¿’æ…£å¾€å¾€å¾æ—¥å¸¸æœ€å¥½é¤Šæˆï¼Œå¸Œæœ›å¤§å®¶åœ¨æœªä¾†çš„é–‹ç™¼é€”ä¸­ï¼Œä¹Ÿå¯ä»¥å°‡é€™äº›æŠ€å·§é‹ç”¨åœ¨å°ˆæ¡ˆä¸­ï¼Œè®“ç¨‹å¼ç¢¼æ›´åŠ çš„æ˜“è®€ä¸¦ä¸”æ›´åŠ çš„æœ‰çµ„ç¹”æ€§ï¼Œæœªä¾†ä¹ŸæœƒæŒçºŒåˆ†äº«æ›´å¤šçš„ Python å°æŠ€å·§ï¼Œè«‹å¤§å®¶æŒçºŒé—œæ³¨ã€‚
